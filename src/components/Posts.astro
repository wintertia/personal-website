---
import type { CollectionEntry } from "astro:content";
import PostCard from "./PostCard.astro";
type Props = {
  posts: CollectionEntry<"posts">[];
  short?: boolean;
};

const { posts, short } = Astro.props;
let postsToShow, titleToShow, classes;
if (short) {
  postsToShow = posts.slice(0, 4);
  titleToShow = "Recent Blog Posts";
  classes = "";
} else {
  postsToShow = posts;
  titleToShow = "My Blog";
  classes =
    "bg-[url('/src/images/backgrounds/grid-haikei.svg')] bg-repeat min-h-screen";
}
---

<div
  class={`bg-base-100 relative flex flex-col items-center pt-20 pb-32 ${classes}`}
>
  <h1 class="project-title mb-8 text-4xl font-bold">{titleToShow}</h1>
  <div class="z-10 mb-8 grid grid-cols-1 gap-x-8 gap-y-4 px-8 md:grid-cols-2">
    {postsToShow.map((post) => <PostCard post={post} />)}
  </div>
  {
    short && (
      <a href="/blog" class="project-card">
        <div class="from-base-300 to-base-300 hover:from-base-200 border-base-300 hover:border-primary rounded-lg border bg-gradient-to-b px-8 py-2 transition duration-500 ease-in-out hover:scale-105">
          View All Posts
        </div>
      </a>
    )
  }
</div>
