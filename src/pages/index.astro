---
import About from "../components/About.astro";
import Hero from "../components/Hero.astro";
import Projects from "../components/Projects.astro";
import Stack from "../components/Stack.astro";
import Layout from "../layouts/Layout.astro";
---

<Layout title="Wintertia">
  <Hero />
  <About />
  <Stack />
  <Projects display={2} />
</Layout>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { SplitText } from "gsap/SplitText";

  gsap.registerPlugin(SplitText, ScrollTrigger);
  let ctx: gsap.Context | null = null;
  document.addEventListener("astro:page-load", () => {
    ScrollTrigger.disable(false);
    ScrollTrigger.enable();
    ctx && ctx.revert();
    ctx = gsap.context(() => {
      // Hero Animations
      const heroTitle = new SplitText(".hero-title", {
        type: "chars",
      });
      const heroSubtitle = new SplitText(".hero-subtitle", {
        type: "words",
      });
      gsap.from(heroTitle.chars, {
        duration: 1,
        opacity: 0,
        y: -20,
        ease: "power2.out",
        stagger: 0.07,
      });
      gsap.from(heroSubtitle.words, {
        duration: 1,
        opacity: 0,
        y: -20,
        ease: "power2.out",
        delay: 0.25,
        stagger: 0.07,
      });

      // Socials Animation
      gsap.from(".social-button", {
        duration: 1,
        opacity: 0,
        yPercent: -100,
        ease: "power2.out",
        delay: 0.5,
        stagger: 0.1,
      });
    });
  });
</script>
